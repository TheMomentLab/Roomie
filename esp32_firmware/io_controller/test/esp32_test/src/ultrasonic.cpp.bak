#include <Arduino.h>

#define TRIG_PIN_1 32
#define ECHO_PIN_1 33
#define TRIG_PIN_2 25
#define ECHO_PIN_2 26

float getDistanceCM(int trigPin, int echoPin) {
  // 초음파 발사
  digitalWrite(trigPin, LOW);
  delayMicroseconds(2);
  digitalWrite(trigPin, HIGH);
  delayMicroseconds(10);
  digitalWrite(trigPin, LOW);

  // Echo 신호 길이 측정 (최대 30ms 기다림)
  long duration = pulseIn(echoPin, HIGH, 30000);

  if (duration == 0) return -1; // 감지 실패
  return duration * 0.034 / 2.0; // cm 단위 거리 계산
}

void setup() {
  Serial.begin(115200);

  pinMode(TRIG_PIN_1, OUTPUT);
  pinMode(ECHO_PIN_1, INPUT);
  pinMode(TRIG_PIN_2, OUTPUT);
  pinMode(ECHO_PIN_2, INPUT);
}

void loop() {
  float d1 = getDistanceCM(TRIG_PIN_1, ECHO_PIN_1);

  delay(50); // 간섭 방지 딜레이

  float d2 = getDistanceCM(TRIG_PIN_2, ECHO_PIN_2);

  if (d1 < 0 && d2 < 0)
    Serial.println("두 센서 모두 감지 실패");
  else
    Serial.printf("센서1: %.1f cm | 센서2: %.1f cm\n", d1, d2);

  delay(500);
}